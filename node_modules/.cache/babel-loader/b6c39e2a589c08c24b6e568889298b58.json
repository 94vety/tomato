{"ast":null,"code":"import axios from 'axios';\nconst baseURL = \"http://82.156.102.187:8002\";\naxios.interceptors.request.use(config => {\n  if (config.url === \"/login/\") {\n    localStorage.clear();\n  } else {\n    const token = `JWT ${localStorage.getItem(\"token\")}`;\n    config.headers.Authorization = token;\n  }\n\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  return Promise.resolve(error.response);\n});\n\nfunction checkStatus(response) {\n  // loading\n  // 如果http状态码正常，则直接返回数据\n  if (response && (response.status === 304 || response.status === 400 || response.status >= 200 && response.status < 300)) {\n    return response; // 如果不需要除了data之外的数据，可以直接 return response.data\n  } // 异常状态下，把错误信息返回去\n\n\n  return {\n    status: -404,\n    msg: '网络异常'\n  };\n}\n\nfunction checkCode(res) {\n  // 如果code异常(这里已经包括网络错误，服务器错误，后端抛出的错误)，可以弹出一个错误提示，告诉用户\n  if (res.status === -404) {// alert(res.msg)\n  }\n\n  if (res.data && !res.data.success) {// alert(res.data.error_msg)\n  }\n\n  return res;\n}\n\nexport default {\n  post(url, data) {\n    return axios({\n      method: 'post',\n      baseURL,\n      url,\n      data,\n      timeout: 10000,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  },\n\n  get(url, params) {\n    return axios({\n      method: 'get',\n      baseURL,\n      url,\n      params,\n      // get 请求时带的参数\n      timeout: 10000,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  },\n\n  patch(url, data) {\n    return axios({\n      method: 'patch',\n      baseURL,\n      url,\n      data,\n      timeout: 10000\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  },\n\n  delete(url, data) {\n    return axios({\n      method: 'delete',\n      baseURL,\n      url,\n      data,\n      timeout: 1000\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  },\n\n  put(url, data) {\n    return axios({\n      method: 'put',\n      baseURL,\n      url,\n      data,\n      timeout: 1000\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  }\n\n};","map":{"version":3,"sources":["/Users/wuliangrui/Desktop/库里泡/item/tomato/src/utils/request.js"],"names":["axios","baseURL","interceptors","request","use","config","url","localStorage","clear","token","getItem","headers","Authorization","error","Promise","reject","response","resolve","checkStatus","status","msg","checkCode","res","data","success","post","method","timeout","then","get","params","patch","delete","put"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nconst baseURL = \"http://82.156.102.187:8002\";\n\naxios.interceptors.request.use(config => {\n    if (config.url === \"/login/\") {\n       localStorage.clear();\n    } else {\n        const token = `JWT ${localStorage.getItem(\"token\")}`;\n        config.headers.Authorization = token;\n    }\n    return config\n}, error => {\n    return Promise.reject(error)\n})\n\naxios.interceptors.response.use(response => {\n    return response\n}, error => {\n    return Promise.resolve(error.response)\n})\n\nfunction checkStatus(response) {\n    // loading\n    // 如果http状态码正常，则直接返回数据\n    if (response && (response.status === 304 || response.status === 400 || response.status >= 200 && response.status < 300)) {\n        return response\n        // 如果不需要除了data之外的数据，可以直接 return response.data\n    }\n    // 异常状态下，把错误信息返回去\n    return {\n        status: -404,\n        msg: '网络异常'\n    }\n}\n\nfunction checkCode(res) {\n    // 如果code异常(这里已经包括网络错误，服务器错误，后端抛出的错误)，可以弹出一个错误提示，告诉用户\n    if (res.status === -404) {\n        // alert(res.msg)\n    }\n    if (res.data && (!res.data.success)) {\n        // alert(res.data.error_msg)\n    }\n    return res\n}\n\nexport default {\n    post(url, data) {\n        return axios({\n            method: 'post',\n            baseURL,\n            url,\n            data,\n            timeout: 10000,\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest',\n                'Content-Type': 'application/json'\n            }\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res)\n            }\n        )\n    },\n    get(url, params) {\n        return axios({\n            method: 'get',\n            baseURL,\n            url,\n            params, // get 请求时带的参数\n            timeout: 10000,\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest'\n            }\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res)\n            }\n        )\n    },\n    patch(url, data) {\n        return axios({\n            method: 'patch',\n            baseURL,\n            url,\n            data,\n            timeout: 10000\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res)\n            }\n        )\n    },\n    delete(url, data) {\n        return axios({\n            method: 'delete',\n            baseURL,\n            url,\n            data,\n            timeout: 1000\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res);\n            }\n        )\n    },\n    put(url, data) {\n        return axios({\n            method: 'put',\n            baseURL,\n            url,\n            data,\n            timeout: 1000\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res);\n            }\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}