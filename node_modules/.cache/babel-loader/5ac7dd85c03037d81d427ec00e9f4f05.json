{"ast":null,"code":"var _jsxFileName = \"/Users/wuliangrui/Desktop/\\u5E93\\u91CC\\u6CE1/item/tomato/src/components/Home/Card/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Modal, Input, Button, InputNumber, Empty, Progress } from \"antd\";\nimport { observer } from \"mobx-react-lite\";\nimport myStore from \"../../../store\";\nimport { PlusCircleOutlined, PauseCircleOutlined } from '@ant-design/icons';\nimport \"./index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  confirm\n} = Modal;\nlet stop = false;\n\nfunction Card() {\n  _s();\n\n  const [count, setCount] = useState(0);\n  const [status, setStatus] = useState(false);\n  const [isVisible, setVisible] = useState(false);\n  const [label, setLabel] = useState(\"\");\n  const [comment, setComment] = useState(\"\");\n  const [minute, setMinute] = useState(30);\n  const [second, setSecond] = useState(\"00:00\");\n  const [percent, setPercent] = useState(0);\n  const [commentVisible, setCommentVisible] = useState(false);\n  useEffect(() => {\n    myStore.getTomatosRequest();\n  }, []);\n\n  const handleCreate = () => {\n    setVisible(true);\n  };\n\n  const handleOk = () => {\n    setVisible(false);\n    setStatus(true);\n    calcTime();\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n    setLabel(\"\");\n    setMinute(30);\n  };\n\n  const handlePause = async () => {\n    confirm({\n      title: \"番茄学习法\",\n      content: \"是否确认中止任务\",\n      okText: \"确认\",\n      cancelText: \"取消\",\n\n      onOk() {\n        setCommentVisible(true);\n        stop = true;\n      }\n\n    });\n  };\n\n  const handleComment = () => {\n    setCommentVisible(false);\n  };\n\n  const handleComplie = () => {\n    myStore.addReportRequest({\n      expected_time: minute,\n      actual_time: parseInt((count + 1) / 60),\n      tip: label,\n      comment\n    });\n    stop = false;\n    setCommentVisible(false);\n    setStatus(false);\n    myStore.getTomatosRequest();\n  };\n\n  const calcTime = () => {\n    let seconds = minute * 60;\n    let timer = setInterval(() => {\n      seconds--;\n      const count = minute * 60;\n      setCount(count - seconds);\n      setPercent((count - seconds) / count);\n\n      if (seconds <= 0) {\n        setSecond(\"00:00\");\n        setCommentVisible(true);\n        clearInterval(timer);\n      } else if (stop) {\n        clearInterval(timer);\n      } else {\n        let m = parseInt(seconds / 60 % 60);\n        let s = parseInt(seconds % 60);\n\n        if (m < 10 && s < 10) {\n          setSecond(`0${m}:0${s}`);\n        } else if (m > 10 && s < 10) {\n          setSecond(`${m}:0${s}`);\n        } else if (m < 10 && s > 10) {\n          setSecond(`0${m}:${s}`);\n        } else {\n          setSecond(`${m}:${s}`);\n        }\n      }\n    }, 1000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ca-ma\",\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u5FC3\\u5F97\\u4F53\\u4F1A\",\n      visible: commentVisible,\n      onOk: handleComment,\n      okText: \"\\u786E\\u8BA4\",\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleComplie,\n        children: \"\\u786E\\u8BA4\"\n      }, \"btn\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        value: comment,\n        onChange: _ref => {\n          let {\n            target: {\n              value\n            }\n          } = _ref;\n          return setComment(value);\n        },\n        placeholder: \"\\u5199\\u4E0B\\u81EA\\u5DF1\\u7684\\u5FC3\\u5F97\\u4F53\\u4F1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: status ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ca-task\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ca-la\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ca-title\",\n          children: \"\\u5012\\u8BA1\\u65F6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ca-time\",\n          children: second\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ca-process\",\n          children: /*#__PURE__*/_jsxDEV(Progress, {\n            className: \"ca-process-inner\",\n            type: \"circle\",\n            strokeColor: {\n              '0%': '#108ee9',\n              '100%': '#87d068'\n            },\n            percent: percent,\n            trailColor: \"rgb(241, 233, 170)\",\n            width: 200\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(PauseCircleOutlined, {\n          className: \"ca-pause\",\n          onClick: handlePause\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 24\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ca-header\",\n          children: \"\\u756A\\u8304\\u5217\\u8868\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {\n          className: \"ca-plus\",\n          onClick: handleCreate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          title: \"\\u756A\\u8304\\u5B66\\u4E60\\u6CD5\",\n          visible: isVisible,\n          onOk: handleOk,\n          onCancel: handleCancel,\n          okText: \"\\u786E\\u8BA4\",\n          cancelText: \"\\u53D6\\u6D88\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ca-modal\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ca-td\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ca-label\",\n                children: \"\\u6807\\u7B7E\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"ca-input\",\n                placeholder: \"\\u8F93\\u5165\\u6807\\u7B7E\",\n                value: label,\n                onChange: _ref2 => {\n                  let {\n                    target: {\n                      value\n                    }\n                  } = _ref2;\n                  return setLabel(value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ca-td\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ca-label\",\n                children: \"\\u65F6\\u95F4\\uFF08\\u5206\\u949F\\uFF09\\uFF1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(InputNumber, {\n                min: 1,\n                max: 1440,\n                value: minute,\n                onChange: value => setMinute(value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ca-list\",\n          children: myStore.tomatoList.length === 0 ? /*#__PURE__*/_jsxDEV(Empty, {\n            className: \"empty\",\n            description: \"\\u6CA1\\u6709\\u6570\\u636E\",\n            image: Empty.PRESENTED_IMAGE_SIMPLE\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 39\n          }, this) : myStore.tomatoList.map((item, index) => {\n            const {\n              tip,\n              now,\n              comment,\n              expected_time,\n              actual_time\n            } = item;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ca-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ca-top\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ca-tip\",\n                  children: tip\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ca-start-time\",\n                  children: now\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ca-comment\",\n                children: comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ca-bto\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ca-left-time\",\n                  children: [\"\\u9884\\u8BA1\\uFF1A\", expected_time, \" \\u5206\\u949F\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ca-right-time\",\n                  children: [\"\\u5B9E\\u9645\\uFF1A\", actual_time, \" \\u5206\\u949F\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 45\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 48\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Card, \"wIp7NygOZpY/R0lTInmm8uoUY70=\");\n\n_c = Card;\nexport default _c2 = observer(Card);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Card\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/wuliangrui/Desktop/库里泡/item/tomato/src/components/Home/Card/index.js"],"names":["useState","useEffect","Modal","Input","Button","InputNumber","Empty","Progress","observer","myStore","PlusCircleOutlined","PauseCircleOutlined","confirm","stop","Card","count","setCount","status","setStatus","isVisible","setVisible","label","setLabel","comment","setComment","minute","setMinute","second","setSecond","percent","setPercent","commentVisible","setCommentVisible","getTomatosRequest","handleCreate","handleOk","calcTime","handleCancel","handlePause","title","content","okText","cancelText","onOk","handleComment","handleComplie","addReportRequest","expected_time","actual_time","parseInt","tip","seconds","timer","setInterval","clearInterval","m","s","target","value","tomatoList","length","PRESENTED_IMAGE_SIMPLE","map","item","index","now"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport {\n    Modal, Input, Button,\n    InputNumber, Empty, Progress\n} from \"antd\";\nimport { observer } from \"mobx-react-lite\";\nimport myStore from \"../../../store\";\nimport {\n    PlusCircleOutlined,\n    PauseCircleOutlined,\n} from '@ant-design/icons';\nimport \"./index.css\";\n\nconst { confirm } = Modal;\nlet stop = false;\n\nfunction Card() {\n    const [count, setCount] = useState(0);\n    const [status, setStatus] = useState(false);\n    const [isVisible, setVisible] = useState(false);\n    const [label, setLabel] = useState(\"\");\n    const [comment, setComment] = useState(\"\");\n    const [minute, setMinute] = useState(30);\n    const [second, setSecond] = useState(\"00:00\");\n    const [percent, setPercent] = useState(0);\n    const [commentVisible, setCommentVisible] = useState(false);\n\n    useEffect(() => {\n        myStore.getTomatosRequest();\n    }, [])\n\n    const handleCreate = () => {\n        setVisible(true);\n    }\n\n    const handleOk = () => {\n        setVisible(false);\n        setStatus(true);\n        calcTime();\n    }\n\n    const handleCancel = () => {\n        setVisible(false);\n        setLabel(\"\");\n        setMinute(30);\n    }\n\n    const handlePause = async() => {\n        confirm({\n            title: \"番茄学习法\",\n            content: \"是否确认中止任务\",\n            okText: \"确认\",\n            cancelText: \"取消\",\n            onOk() {\n                setCommentVisible(true);\n                stop = true;\n            },\n        });\n    }\n\n    const handleComment = () => {\n        setCommentVisible(false);\n    }\n\n    const handleComplie = () => {\n        myStore.addReportRequest({\n            expected_time: minute,\n            actual_time: parseInt((count + 1) / 60),\n            tip: label,\n            comment \n        });\n\n        stop = false;\n        setCommentVisible(false);\n        setStatus(false);\n        myStore.getTomatosRequest();\n    }\n\n    const calcTime = () => {\n        let seconds = minute * 60;\n\n        let timer = setInterval(() => {\n            seconds--;\n            const count = minute * 60;\n            setCount(count - seconds);\n            setPercent((count - seconds) / count);\n\n            if (seconds <= 0) {\n                setSecond(\"00:00\");\n                setCommentVisible(true);\n                clearInterval(timer);\n            } else if (stop) {\n                clearInterval(timer);\n            } else {\n                let m = parseInt((seconds / 60) % 60);\n                let s = parseInt(seconds % 60);\n                if (m < 10 && s < 10) {\n                    setSecond(`0${m}:0${s}`);\n                } else if (m > 10 && s < 10) {\n                    setSecond(`${m}:0${s}`);\n                } else if (m < 10 && s > 10) {\n                    setSecond(`0${m}:${s}`);\n                } else {\n                    setSecond(`${m}:${s}`);\n                }\n            }\n        }, 1000);\n    }\n\n    return (\n        <div className=\"ca-ma\">\n            <Modal\n                title=\"心得体会\"\n                visible={commentVisible}\n                onOk={handleComment}\n                okText=\"确认\"\n                footer={[\n                    <Button key=\"btn\" onClick={handleComplie}>\n                        确认\n                    </Button>\n                ]}\n            >\n                <Input\n                    value={comment}\n                    onChange={({target: { value }}) => setComment(value)}\n                    placeholder=\"写下自己的心得体会\"\n                />\n            </Modal>\n            <div className=\"card\">\n                {status\n                    ? (<div className=\"ca-task\">\n                        <div className=\"ca-la\">{label}</div>\n                        <div className=\"ca-title\">倒计时</div>\n                        <div className=\"ca-time\">{second}</div>\n                        <div className=\"ca-process\">\n                            <Progress\n                                className=\"ca-process-inner\"\n                                type=\"circle\"\n                                strokeColor={{\n                                    '0%': '#108ee9',\n                                    '100%': '#87d068',\n                                }}\n                                percent={percent}\n                                trailColor=\"rgb(241, 233, 170)\"\n                                width={200}\n                            />\n                        </div>\n                        <PauseCircleOutlined\n                            className=\"ca-pause\"\n                            onClick={handlePause}\n                        /> \n                    </div>)\n                    :  (<div>\n                        <div className=\"ca-header\">番茄列表</div>\n                        <PlusCircleOutlined\n                            className=\"ca-plus\"\n                            onClick={handleCreate}\n                        />\n                        <Modal\n                            title=\"番茄学习法\"\n                            visible={isVisible}\n                            onOk={handleOk}\n                            onCancel={handleCancel}\n                            okText=\"确认\"\n                            cancelText=\"取消\"\n                        >\n                            <div className=\"ca-modal\">\n                                <div className=\"ca-td\">\n                                    <div className=\"ca-label\">标签：</div>\n                                    <Input\n                                        className=\"ca-input\"\n                                        placeholder=\"输入标签\"\n                                        value={label}\n                                        onChange={({target: { value }}) => setLabel(value)}\n                                    />\n                                </div>\n                                <div className=\"ca-td\">\n                                    <div className=\"ca-label\">时间（分钟）：</div>\n                                    <InputNumber\n                                        min={1}\n                                        max={1440}\n                                        value={minute}\n                                        onChange={value => setMinute(value)}\n                                    />\n                                </div>\n                            </div>\n                        </Modal>\n                        <div className=\"ca-list\">\n                            {\n                                myStore.tomatoList.length === 0\n                                    ? <Empty\n                                        className=\"empty\"\n                                        description=\"没有数据\"\n                                        image={Empty.PRESENTED_IMAGE_SIMPLE}\n                                    />\n                                    : myStore.tomatoList.map((item, index) => {\n                                        const {\n                                            tip, now, comment,\n                                            expected_time, actual_time\n                                        } = item;\n\n                                        return <div className=\"ca-item\" key={index}>\n                                            <div className=\"ca-top\">\n                                                <div className=\"ca-tip\">{tip}</div>\n                                                <div className=\"ca-start-time\">{now}</div>\n                                            </div>\n                                            <div className=\"ca-comment\">{comment}</div>\n                                            <div className=\"ca-bto\">\n                                                <div className=\"ca-left-time\">预计：{expected_time} 分钟</div>\n                                                <div className=\"ca-right-time\">实际：{actual_time} 分钟</div>\n                                            </div>\n                                        </div>\n                                    })\n                            }\n                        </div>\n                    </div>)\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default observer(Card);\n"]},"metadata":{},"sourceType":"module"}